<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IP 查询示例</title>
  </head>
  <body>
    <iframe src="https://ip.hydrz.cn/api" style="display: none"></iframe>
    <script type="module">
      const iframe = document.querySelector("iframe");
      iframe.onload = () => {
        iframe.contentWindow.postMessage("ip", "*");
      };

      window.addEventListener("message", (event) => {
        if (event.origin !== "https://ip.hydrz.cn") return;
        if (event.data && event.data.error) {
          document.body.innerText = event.data.error;
          return;
        }

        const { ip, asn, continent, country, region, region_code, city, lon, lat, postal_code, edgeIP, edgeColo, ts } = event.data;
        document.body.innerText = `IP 信息:
IP 地址: ${ip}
ASN: ${asn}
国家: ${country}
地区: ${region} (${region_code})
城市: ${city}
经度: ${lon}
纬度: ${lat}
邮政编码: ${postal_code}
边缘节点 IP: ${edgeIP}
边缘节点 位置: ${edgeColo}
响应时间: ${ts}ms
`;
      });
    </script>
  </body>
</html>
